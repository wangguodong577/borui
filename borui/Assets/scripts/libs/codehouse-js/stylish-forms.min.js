/*                                           
 * ---------------------------------------- *
 * Name:    Codehouse Stylish Forms         *
 * Version: 2.2.0                           *
 * Author:  Matt O'Neill | Joe Moore        *
 * Status:  Release                         *
 * Requisites: >=jquery 1.11.0              *
 *               jquery ui (opt)            *
 * ---------------------------------------- *
 */

window.stylishForms||(window.stylishForms={}),window.stylishForms=new function(){var t=!1,s=function(s){_input=function(){s.find('input[type="text"], input[type="number"], input[type="password"], input[type="email"], textarea').each(function(){$(this).wrap('<div class="stylish-'+this.type+'" data-type="'+this.type+'" />').before("<span></span>")}),s.find("input.date").each(function(){$(this).parent().addClass("multidate").children("span").addClass("date")})},_select=function(){s.find("select").each(function(){$(this).wrap('<div class="stylish-select" data-type="'+this.type+'" />').css({opacity:0,position:"absolute"}).before('<span class="selected"><span class="text">'+$(this).find("option:selected").text()+'</span><span class="ico"></span></span><ul></ul>');var t="",s=0;$(this).children().each(function(){$(this).is("optgroup")?(t+='<li class="group">',t+="<span>"+$(this).attr("label")+"</span>",t+="<ul>",$(this).children().each(function(){$(this).data("index",s),t+='<li data-index="'+s+'" '+($(this).is(":disabled")?'"class="disabled"':"")+($(this).is(":selected")?"selected":"")+">"+$(this).text()+"</li>",s++}),t+="</ul>",t+="</li>"):($(this).data("index",s),t+='<li data-index="'+s+'" '+($(this).is(":disabled")?'class="disabled"':"")+($(this).is(":selected")?"selected":"")+">"+$(this).text()+"</li>",s++)}),$(this).siblings("ul").append(t)})},_checkboxDropdowns=function(){s.find('ul[data-stylish-group="checkbox-dropdown"]').each(function(){$(this).wrap('<div class="stylish-select checkbox-dropdown" data-type="'+this.type+'" />').before('<span class="selected"><span class="text">Please select...</span><span class="ico"></span></span>')})},_dualStates=function(){s.find('input[type="checkbox"], input[type="radio"]').each(function(){$(this).wrap('<div class="stylish-ds" data-type="'+this.type+'" />').css({opacity:0,position:"absolute"}).before('<span class="'+($(this).is(":checked")?"checked":"")+'"><span class="ico"></span></span>')})},_range=function(){s.find('[data-type="range"]').each(function(){var t=$(this),s=t.data(),e=s.updateValue,i=s.inputfor,n=t.parent().find('[data-input-from="'+i+'"]'),a=t.parent().find('[data-input-to="'+i+'"]'),c=[n.val(),a.val()].filter(function(t){return void 0!==t});t.slider({range:c.length>1,values:c,step:s.precision,min:s.min,max:s.max,slide:function(t,s){var i=s.values[0],c=s.values[1];e&&(n&&n.val(i),a&&a.val(c))}})})},_helpers={checkboxDdSelected:function(t){var s=t.find('input[type="checkbox"]:checked, input[type="radio"]:checked'),e=t.find(".selected > span.text");if(0===s.length)e.text(t.find("li:first-child label").text());else{var i=[],n="";s.each(function(){i.push($('label[for="'+$(this).attr("id")+'"]').text())}),n=i.join(" , "),e.text(n),e.attr("title",n)}}},_actions=function(){s.find('.stylish-ds input[type="checkbox"]').each(function(){function t(t){s.parents(".stylish-select.checkbox-dropdown").length&&(_helpers.checkboxDdSelected(s.parents(".stylish-select.checkbox-dropdown")),t&&s.closest("li").toggleClass("checked"))}var s=$(this);s.on({change:function(){$(this).siblings("span").toggleClass("checked"),t($(this))}}),t()}),s.find(".stylish-ds input[type=radio]").on("change",function(){s.find('input[type="radio"][name="'+$(this).attr("name")+'"]').each(function(){$(this).siblings("span").removeClass("checked")}),$(this).siblings("span").addClass("checked")}),s.find(".stylish-select .selected").on("click",function(t){t.stopPropagation();var s=$(this).siblings("ul");$(".stylish-select > ul").not(s).hide(),s.toggle();var e=s.offset(),i=$(window).scrollTop(),n=e.top+s.outerHeight(),a=$(window).height()+i,c=e.top-i,l=a-e.top;n>a?c>l?(s.css("max-height",.8*c),s.addClass("show-above")):(s.css("max-height",.8*(a-c)),s.removeClass("show-above")):(s.removeClass("show-above"),s.css("max-height","none"))}),s.find(".stylish-select:not(.checkbox-dropdown)").on("click","li",function(t){t.stopPropagation();var s=$(this);s.is(":not(.group, .disabled)")&&(s.parents(".stylish-select").children("ul").toggle().siblings(".selected").find("span.text").text(s.text()),s.parents(".stylish-select").find("select").prop("selectedIndex",s.data("index")).change())}),s.find(".stylish-select select").on("change",function(){$(this).parent().find("span.selected > span.text").text($(this).find("option:selected").text())}),t===!1&&($(document).on("click touchend",function(t){0===$(t.target).parents(".stylish-select").length&&s.find(".stylish-select > ul").hide()}),t=!0)},void function(){s.addClass("stylish-form").attr("data-stylish-form","set"),_input(),_select(),_dualStates(),_checkboxDropdowns(),jQuery.ui&&_range(),_actions()}()};this.apply=function(){$('[data-stylish-form="true"]').each(function(){s($(this))})},this.update=function(){this.apply()}};