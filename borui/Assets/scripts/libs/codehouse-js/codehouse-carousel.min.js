/* 
 * ---------------------------------------- *
 * Name: Codehouse Carousel JavaScripts     *
 * Type: JavaScript                         *
 * Version: 2.2.0                           *
 * Author: Matt O'Neill                     *
 * Status: Release                          *
 * Requisites: >=jquery ui 1.8.20           *
 *             chg.Cookie(opt)              *
 *             json2(opt IE7 Cookie)        *
 * ---------------------------------------- *
 */

void function (n) { "use strict"; function i(n, t) { var i, r; for (i in n) { if (i in t) { if (typeof n[i] == "object") for (r in n[i]) t[i][r] = t[i][r] != undefined ? t[i][r] != n[i][r] ? t[i][r] : n[i][r] : n[i][r]; continue } t[i] = n[i] } return t } n.CodehouseCarousel = function (t, r, u) { var o = this, s = { modes: { slide: !0, infinite: !0, responsive: !0, nudge: !1 }, controls: { step: !0, pager: !0 }, rotate: { auto: !1, direction: "right", interval: 500, duration: 300, type: "linear" }, dimensions: { fixedHeight: !0, maxHeight: 400, baseWidth: 600 }, options: { preload: !1, stickySlides: !0, visibleClassAfter: !0, maskedOverflow: !0, setSlide: 0 }, onReady: function () { }, onRotateStart: function () { }, onRotateEnd: function () { } }, e = i(s, r), f; o.actionData = {}; f = { m: { $b: n(t), ani: !1, hero: !1, autDis: !1, modes: [], fPos: 0, lPos: 0, cycTmr: 0, aI: 0, cP: 0, overflow: 0, sldSum: 0, sldHgt: undefined, sldWth: undefined, dynSldWth: null, div: 1, imgSrcArr: [], trans: {}, resEv: "resize", algFct: { linear: ["cubic-bezier(0.250, 0.250, 0.750, 0.750)", "linear"], quad: ["cubic-bezier(0.455, 0.030, 0.515, 0.955)", "easeInOutQuad"], back: ["cubic-bezier(0.680, -0.550, 0.265, 1.550)", "easeInOutBack"], expo: ["cubic-bezier(1.000, 0.000, 0.000, 1.000)", "easeInOutExpo"] }, ui: { masks: '<span class="mask left" data-direction="left"><\/span><span class="mask right" data-direction="right"><\/span>' }, stateData: { activeSlide: 0 }, browser: { oldIe: !1 }, _constr: function () { var i = navigator.userAgent.toLowerCase(); f.m.browser.oldIe = i.indexOf("msie 7.0") > -1 || i.indexOf("msie 8.0") > -1; f.m.ccId = "cc-id-" + f.m.$b.data("guid"); o.actionData = { $banner: n(t), slideDirection: e.rotate.direction, active: undefined } }, _configImg: function () { for (var n, t = [], i = 0; i < f.m.$bSld.length; i++) f.m.imgSrcArr[i] = f.m.$bSld.eq(i).find("img").attr("src"); if (f.m.imgSrcArr.length >= 1) for (n in f.m.imgSrcArr) t[n] = new Image, t[n].onload = f.c.async._updChk(), t[n].onerror = f.c.async._updChk(), t[n].src = f.m.imgSrcArr[n] }, _props: function (n) { f.m.hero = f.m.$bSld.length <= 1; f.m.div = f.m.hero ? 0 : e.modes.slide && e.modes.infinite ? 3 : 1; f.m.sldSum = n ? f.m.$bSld.length / f.m.div : f.m.div > 0 ? f.m.$bSld.length * f.m.div / f.m.div : 0; f.m.sldHgt = f.m.$b.parent().height(); f.m.sldWth = f.m.dynSldWth = f.m.$b.parent().width(); f.m.trans = f.m.fact._transType(); f.m.modes = [] }, _staticCache: function () { this.defaults.cke = "Cookie" in window ? Object.build(new Cookie) : undefined; f.m.$bSlds = f.m.$b.children(".slide-container"); f.m.$bSld = f.m.$bSlds.children("div"); f.m.$pgnCntr = f.m.$b.find(".pagination-controls"); f.m.$stpCntr = f.m.$b.find(".step"); f.m.$masks = f.m.$b.find(".mask") }, _dynamCache: function () { delete f.m.$bSld; f.m.$bSld = f.m.$bSlds.children("div") }, _stitch: function () { f.m.$b.prepend(f.m.ui.masks) }, defaults: { _get: function () { if (e.options.stickySlides && this.cke !== undefined) { try { this.defaultsData = this.cke.check(f.m.ccId) } catch (n) { } this.defaultsData !== undefined && (f.m.stateData = JSON.parse(this.defaultsData)) } }, _set: function () { if (e.options.stickySlides && this.cke !== undefined) try { this.cke.write(f.m.ccId, JSON.stringify(f.m.stateData)) } catch (n) { } }, _apply: function () { e.options.setSlide > 0 && e.options.setSlide <= f.m.sldSum ? f.c._actionController(e.options.setSlide - 1, !1) : f.m.stateData.activeSlide > 0 ? f.c._actionController(f.m.stateData.activeSlide, !1) : o.actionData.active = 1 } }, carousel: { _slideVals: function (n) { var r = 1, i, t = 0; return typeof n == "number" ? n < f.m.aI ? (r = -(n - f.m.aI), t = "left") : n > f.m.aI ? (r = -(f.m.aI - n), t = "right") : n === f.m.aI && (t = "reset") : t = n, o.actionData.slideDirection = t, i = f.m.fact.calc[t](r), f.m.aI = typeof n == "number" ? n : i[1] ? f.m.aI == Math.ceil(f.m.sldSum) - 1 ? 0 : f.m.aI + 1 : f.m.aI == 0 ? Math.ceil(f.m.sldSum) - 1 : f.m.aI - 1, o.actionData.active = f.m.aI + 1, { newPosition: i[0], dir: i[1] } }, _nudgeVals: function (n) { return f.m.cP + { left: 20, right: -20, "null": 0 }[n] }, _sizingVals: function (n) { f.m.dynSldWth = n; f.m.overflow = e.modes.infinite ? f.m.dynSldWth * Math.ceil(f.m.sldSum) * -1 : 0; f.m.fPos = f.m.overflow; f.m.lPos = f.m.overflow - (f.m.dynSldWth * f.m.sldSum - f.m.dynSldWth); f.m.cP = f.m.fPos - f.m.dynSldWth * f.m.aI } }, fact: { _transType: function () { var i = document.createElement("div"), n = ["WebkitPerspective", "MozPerspective", "OPerspective", "msPerspective"]; for (var t in n) { if (i.style[n[t]] !== undefined) return { prefix: n[t].replace("Perspective", "").toLowerCase(), anim: "-" + n[t].replace("Perspective", "").toLowerCase() + "-transform" }; if (+t == n.length - 1) return { prefix: undefined, anim: "margin-left" } } }, _hgtRat: function (n) { var t = e.dimensions.maxHeight / e.dimensions.baseWidth * n; return e.dimensions.fixedHeight ? parseInt(e.dimensions.maxHeight) : t > e.dimensions.maxHeight ? e.dimensions.maxHeight : t }, calc: { left: function (n) { return [e.modes.slide ? e.modes.infinite ? f.m.cP + f.m.dynSldWth * n : f.m.aI == 0 ? f.m.lPos : f.m.cP + f.m.dynSldWth * n : 0, !1] }, right: function (n) { return [e.modes.slide ? e.modes.infinite ? f.m.cP - f.m.dynSldWth * n : f.m.aI == f.m.sldSum - 1 ? f.m.fPos : f.m.cP - f.m.dynSldWth * n : 0, !0] }, reset: function () { return [e.modes.slide ? f.m.cP : 0, !0] } } }, _errors: function () { f.m.isError = !0 } }, c: { async: { _ldInc: 0, _prld: function () { e.options.preload && !f.m.browser.oldIe ? f.m._configImg() : f.c._ready() }, _updChk: function () { this._ldInc++; this._ldInc === f.m.imgSrcArr.length && f.c._ready() } }, _configure: function (n) { f.m._props(n); f.m.$bSlds.attr("data-totalslides", f.m.$bSld.length); e.modes.slide && e.modes.infinite && !f.m.hero && (f.m.modes.push("infinite"), n || (f.m.$bSlds.prepend(f.m.$bSld.clone()), f.m.$bSlds.prepend(f.m.$bSld.clone()))); f.m.modes.push(e.modes.slide ? "slide" : "fade"); f.m._dynamCache(); f.v._applyModes(); f.c._fit(); void (e.controls.pager && !f.m.hero && !n && f.v.carousel._bldPager()); f.v.carousel._toggleCntr(); f.v.carousel._togglePager(); f.v.carousel._toggleMasks(); void (e.controls.pager && f.v.carousel._setActivePager()); f.c.autoScroll._intTmr() }, _ready: function () { f.m.isError || (f.c._dynEvnts(), f.m.defaults._apply(), f.v._setActive(), f.v._present(), f.v.carousel._stVis(), f.c.external._ready()) }, _statEvnts: function () { function i() { f.m.ani = !1; f.c._rspnsve(); f.m.autDis = !1 } var t; f.m.$b.on({ mouseenter: function () { f.m.autDis = !0 }, mouseleave: function () { f.m.autDis = !1 } }); n(window).on(f.m.resEv, function () { f.m.$bSlds.stop(); f.m.autDis = !0; clearTimeout(t); f.c._rspnsve(); t = setTimeout(function () { i() }, 100) }) }, _dynEvnts: function () { if (e.controls.step) f.m.$stpCntr.on({ click: function () { f.c._actionController(n(this).data("direction").toLowerCase(), !0) } }); else f.m.$stpCntr.off("click"); f.m.$stpCntr.off("mouseenter mouseleave"); void (e.modes.nudge && f.m.$stpCntr.on({ mouseenter: function () { !f.m.ani && e.modes.slide && f.c._ndge(n(this).data("direction").toLowerCase()) }, mouseleave: function () { !f.m.ani && e.modes.slide && f.c._ndge(null) } })); void (e.controls.pager && !f.m.hero && f.m.$pgnCntr.children().on({ click: function () { var t = n(this).index(); t != f.m.aI && f.c._actionController(t, !0) } })); void ("touch" in window && f.m.trans.prefix && f.m.$bSlds.touch({ threshold: 100, swipeDirection: "horizontal", start: function () { f.m.$bSlds.css("-" + f.m.trans.prefix + "-transition-duration", "0s") }, right: function () { f.c._actionController("left", !0) }, left: function () { f.c._actionController("right", !0) }, moving: function (n) { !f.m.ani && e.modes.slide && f.v.action._move(n.x) }, notReached: function () { e.modes.slide && f.c._actionController(f.m.aI, !0) } })) }, _actionController: function (n, t) { function r() { f.m.ani = !1; f.c.autoScroll._intTmr(); f.c.external._end(); void (e.options.visibleClassAfter && f.v.carousel._stVis()) } if (!f.m.ani) { f.c.autoScroll._intTmrClr(); f.m.ani = !0; var i = f.m.carousel._slideVals(n); f.c.external._start(); f.v.carousel._setActivePager(); void (!e.options.visibleClassAfter && f.v.carousel._stVis()); e.modes.slide ? t ? f.v.action._slide(i.newPosition, function () { e.modes.infinite && f.m.aI === 0 && i.dir || f.m.aI === Math.ceil(f.m.sldSum) - 1 && !i.dir ? (f.m.cP = i.dir ? f.m.fPos : f.m.lPos, f.v.action._snap(f.m.cP)) : f.m.cP = i.newPosition; r() }) : (f.v.action._snap(i.newPosition), f.m.cP = e.modes.infinite && f.m.aI === 0 && i.dir || f.m.aI === Math.ceil(f.m.sldSum) - 1 && !i.dir ? i.dir ? f.m.fPos : f.m.lPos : i.newPosition, r()) : t ? f.v.action._fade(r) : (f.v.action._snap(i.newPosition), f.v.action._show(r)) } f.m.stateData.activeSlide = f.m.aI; f.m.defaults._set() }, _ndge: function (n) { f.v.action._nudge(f.m.carousel._nudgeVals(n)) }, _fit: function (n) { n = n === undefined ? f.m.$b.width() : n; f.v.dims._setHeight(n); f.v.dims._setWidth(n); e.modes.slide && (f.m.carousel._sizingVals(n), f.v.action._snap(f.m.overflow - f.m.dynSldWth * f.m.aI), f.m.hero || f.v.dims._masks()); f.m.hero || f.v.dims._masks() }, _rspnsve: function () { e.modes.responsive && f.c._fit(f.m.$b.width()) }, autoScroll: { _intTmr: function () { e.rotate.auto && !f.m.hero && (f.c.autoScroll._intTmrClr(), f.m.cycTmr = setInterval(function () { f.m.autDis || f.c._actionController(e.rotate.direction.toLowerCase(), !0) }, e.rotate.interval)) }, _intTmrClr: function () { clearInterval(f.m.cycTmr) } }, external: { _start: function () { e.onRotateStart(o.actionData) }, _end: function () { e.onRotateEnd(o.actionData) }, _ready: function () { e.onReady(o.actionData) } } }, v: { carousel: { _toggleCntr: function () { !f.m.hero && e.controls.step ? f.m.$stpCntr.fadeIn(800) : f.m.$stpCntr.hide() }, _setActivePager: function () { f.m.$pgnCntr.children().removeClass("active").eq(f.m.aI).addClass("active") }, _stVis: function () { f.m.$bSld.removeClass("visible").eq(e.modes.slide ? f.m.aI + Math.ceil(f.m.sldSum) : f.m.aI).addClass("visible") }, _bldPager: function () { for (var n = 0; n < f.m.sldSum; n++) f.m.$pgnCntr.append("<span />"); f.m.$pgnCntr.css({ marginLeft: -(f.m.$pgnCntr.outerWidth() / 2) }) }, _togglePager: function () { !f.m.hero && e.controls.pager ? f.m.$pgnCntr.show() : f.m.$pgnCntr.hide() }, _replaceContent: function (n) { f.m.$bSlds.html(n); f.m.$pgnCntr.empty() }, _toggleMasks: function () { e.options.maskedOverflow ? f.m.$masks.fadeIn(800) : f.m.$masks.hide() } }, action: { _fade: function (t) { f.m.$bSlds.children(".active").css("z-index", 1); f.m.$bSlds.children().eq(f.m.aI).css("z-index", 2).fadeIn(e.rotate.duration, function () { f.m.$bSlds.children(".active").css("z-index", 0).hide().removeClass("active"); n(this).addClass("active"); t() }) }, _show: function (n) { f.m.$bSlds.children().eq(0).hide(); f.m.$bSlds.children().eq(f.m.aI).css("z-index", 2).show().addClass("active"); n() }, _slide: function (t, i) { switch (f.m.trans.prefix) { case undefined: f.m.$bSlds.stop().animate({ marginLeft: t }, e.rotate.duration, f.m.algFct[e.rotate.type][1], function () { i() }); break; default: f.m.$bSlds.css("-" + f.m.trans.prefix + "-transition-duration", e.rotate.duration / 1e3 + "s").css(f.m.trans.anim, "translate3d(" + t + "px, 0, 0)").css("-" + f.m.trans.prefix + "-transition-timing-function", f.m.algFct[e.rotate.type][0]).on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend", function () { n(this).unbind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"); i() }) } }, _snap: function (n) { switch (f.m.trans.prefix) { case undefined: f.m.$bSlds.css("margin-left", n); break; default: f.m.$bSlds.css("-" + f.m.trans.prefix + "-transition-duration", "0s"); f.m.$bSlds.css(f.m.trans.anim, "translate3d(" + n + "px, 0, 0)") } }, _move: function (n) { f.m.$bSlds.css(f.m.trans.anim, "translate3d(" + (f.m.cP + n) + "px, 0, 0)") }, _nudge: function (n) { switch (f.m.trans.prefix) { case undefined: f.m.$bSlds.stop().animate({ marginLeft: n }, 150, "linear"); break; default: f.m.$bSlds.css("-" + f.m.trans.prefix + "-transition-duration", .15 + "s").css(f.m.trans.anim, "translate3d(" + n + "px, 0, 0)").css("-" + f.m.trans.prefix + "-transition-timing-function", "cubic-bezier(0.250, 0.250, 0.750, 0.750)") } } }, _loading: function () { f.m.$b.children("span.loader").fadeIn(300) }, _present: function () { f.m.$b.children("span.loader").fadeOut(600) }, _applyModes: function () { f.m.$b.attr("data-modes", ""); f.m.$b.attr("data-modes", f.m.modes.join(" ")) }, _setActive: function () { f.m.$bSld.eq(f.m.aI).addClass("active") }, dims: { _setHeight: function (n) { f.m.$b.add(f.m.$bSlds).add(f.m.$bSld).css("height", f.m.fact._hgtRat(n)) }, _setWidth: function (n) { f.m.$bSld.css("width", n) }, _masks: function () { f.m.$b.children(".mask.left").css({ width: f.m.overflow * -1, marginLeft: f.m.overflow }); f.m.$b.children(".mask.right").css({ width: f.m.overflow * -1, marginLeft: f.m.dynSldWth }) } } } }; this.fit = function (n) { f.c._fit(n) }; this.init = function () { f.m._constr(); f.m._stitch(); f.m._staticCache(); f.m.defaults._get(); f.c._configure(!1); f.c._statEvnts(); f.c.async._prld(); f.m.$b.attr("data-cc-id", u) }(); this.update = function (n, t, r) { r && (e = i(e, r)); var u = !0; (n || "") && (f.v._loading(), f.v.carousel._replaceContent(n), f.m._dynamCache(), u = !1); f.c._configure(u); f.c._dynEvnts(); (t || !e.modes.slide) && f.c._actionController(0, !1); f.v._present() } }; var t = 0; n.fn.codehouseCarousel = function (i) { return this.each(function () { if (undefined == n(this).data("codehouseCarousel-" + t)) { var r = new n.CodehouseCarousel(this, i, t++); n(this).data("codehouseCarousel", r) } }) }; Object.build = function (n) { function i() { typeof n.init == "function" && t.length && n.init.apply(this, t) } if (n !== undefined) { var t = Array.prototype.slice.call(arguments, 1); return i.prototype = n, new i } }; jQuery.easing.jswing = jQuery.easing.swing; jQuery.extend(jQuery.easing, { def: "easeInOutQuad", swing: function (n, t, i, r, u) { return jQuery.easing[jQuery.easing.def](n, t, i, r, u) }, easeInOutQuad: function (n, t, i, r, u) { return (t /= u / 2) < 1 ? r / 2 * t * t + i : -r / 2 * (--t * (t - 2) - 1) + i }, easeInOutBack: function (n, t, i, r, u, f) { return (f == undefined && (f = 1.70158), (t /= u / 2) < 1) ? r / 2 * t * t * (((f *= 1.525) + 1) * t - f) + i : r / 2 * ((t -= 2) * t * (((f *= 1.525) + 1) * t + f) + 2) + i }, easeInOutExpo: function (n, t, i, r, u) { return t == 0 ? i : t == u ? i + r : (t /= u / 2) < 1 ? r / 2 * Math.pow(2, 10 * (t - 1)) + i : r / 2 * (-Math.pow(2, -10 * --t) + 2) + i } }) }(jQuery);